<%- include('../partials/header.public.ejs'); %>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bs-stepper/dist/css/bs-stepper.min.css" />
  <div class="container-fluid">
    <div class="mb-5 p-4 bg-white shadow-sm">
      <div id="stepper1" class="bs-stepper">
        <div class="bs-stepper-header">
          <div class="step" data-target="#test-l-1">
            <button type="button" class="btn step-trigger">
              <span class="bs-stepper-circle">1</span>
              <br>
              <span class="bs-stepper-label">Información empresarial</span>
            </button>
          </div>
          <div class="line"></div>
          <div class="step" data-target="#test-l-2">
            <button type="button" class="btn step-trigger">
              <span class="bs-stepper-circle">2</span>
              <span class="bs-stepper-label">Administración de participantes</span>
            </button>
          </div>
          <div class="line"></div>
          <div class="step" data-target="#test-l-3">
            <button type="button" class="btn step-trigger" aria-selected="true">
              <span class="bs-stepper-circle">3</span>
              <span class="bs-stepper-label">Subida de documentación</span>
            </button>
          </div>
        </div>
        <div class="bs-stepper-content">
          <div id="test-l-1" class="content">
            <p class="text-dark">
              <b>Instrucciones: </b>Buscar nombre de empresa y asegurese que la
              información sea la correcta
            </p>
            <select class="custom-select" id="select_empresa">
              <option value="0">- Buscar empresa -</option>
            </select>
            <hr />
            <form id="update_form" style="display: none">
              <h5>Actualización de información empresarial</h5>
              <div class="form-row">
                <div class="col">
                  <label for="nit">NIT</label>
                  <input type="text" id="nit" name="nit" required class="form-control form-control-sm"
                    placeholder="0000-000000-0000" />
                </div>
                <div class="col">
                  <label for="patronal">Número Patronal</label>
                  <input type="text" id="patronal" name="patronal" class="form-control form-control-sm" />
                </div>
                <div class="col">
                  <label for="num_empleados">Número de empleados</label>
                  <input type="number" id="num_empleados" name="num_empleados" class="form-control form-control-sm" />
                </div>
                <div class="col">
                  <label for="aportacion">Aportación mensual INSAFORP</label>
                  <input type="text" id="aportacion" name="aportacion" placeholder="$0.00"
                    class="form-control form-control-sm" />
                </div>
              </div>
              <hr />
            </form>
            <button class="btn btn-primary float-right" onclick=" VerificarEmpresa()">
              Continuar al siguiente paso
            </button>
          </div>
          <div id="test-l-2" class="content">
            <p class="text-dark">
              <b>Instrucciones: </b>Rellenar la información de los participantes
              que desea inscribir y verificar la información de la tabla
            </p>
            <div class="form-row">
              <div class="col">
                <label for="name">DUI*</label>
                <input type="text" id="dui" name="dui" class="form-control" placeholder="0000000-0" />
              </div>
              <div class="col">
                <label for="tel">Nombre*</label>
                <input type="text" id="nombre" name="nombre" class="form-control" />
              </div>
              <div class="col">
                <label for="isss">N° ISSS</label>
                <input type="text" id="isss" name="isss" class="form-control" />
              </div>
              <div class="col">
                <label for="cargo">Cargo</label>
                <input type="text" id="cargo" name="cargo" class="form-control" />
              </div>
              <div class="col">
                <label for="tel">Teléfono</label>
                <input type="text" id="tel" class="form-control" placeholder="0000-0000" />
              </div>
            </div>
            <div class="form-row">
              <div class="col-3">
                <label for="tel">Email</label>
                <input type="text" id="email" class="form-control" />
              </div>
              <div class="col-3">
                <label for="genero">Sexo</label>
                <select class="custom-select" required id="genero">
                  <option disabled selected>Seleccionar Sexo</option>
                  <option value="Hombre">Hombre</option>
                  <option value="Mujer">Mujer</option>
                </select>
              </div>
              <div class="col-6">
                <label for="tel">Curso que desea tomar:</label>
                <select class="custom-select" id="curso">
                  <% cursos.forEach(element=> { %>
                    <option value="<%= element.Codigo_curso %>">
                      <%= element.Nombre.trim() + ' ' + element.Horario.trim() %>
                    </option>
                    <% }) %>
                </select>
              </div>
            </div>
            <button class="btn btn-success float-right my-2" id="botonAdd">
              Agregar
            </button>
            <br />
            <br /><br />
            <div class="table-responsive">
              <table class="table table-bordered" id="tablaParticipantes" width="100%" cellspacing="0">
                <thead>
                  <tr>
                    <th>DUI</th>
                    <th>Nombre</th>
                    <th>Teléfono</th>
                    <th>ISSS</th>
                    <th>Cargo</th>
                    <th>Email</th>
                    <th>Curso</th>
                    <th>Código de curso</th>
                    <th>Género</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <button class="btn btn-danger btn-small float-left" onclick="deleteTableAndLocal()">
              Borrar Tabla
            </button>
            <button class="btn btn-primary float-right" onclick="AsginarGlobalCursos(); stepper1.next()">
              Continuar al siguiente paso
            </button>
          </div>
          <div id="test-l-3" class="content">
            <p class="text-dark">
              <b>Instrucciones: </b>Adjuntar los siguientes archivos:
            </p>
            <div class="card mb-4 shadow-sm">
              <div class="card-body">
                <p>
                  1. Solicitud de capacitación firmada y sellada.
                </p>
                <div id="cursos_files"></div>
              </div>
            </div>
            <div class="card mb-4 shadow-sm">
              <div class="card-body">
                <p>2. Recibo de ingresos por cotización (Recibo de aportación) - <a target="_blank"
                    href="/static/files/recibo.pdf" class="text-danger"> VER EJEMPLO </a></p>
                <div class="input-group">
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="recibo" aria-describedby="inputGroupFileAddon02">
                    <label class="custom-file-label" id="recibo1">Choose file</label>
                  </div>
                </div>
                <hr>
                <p> Comprobante de pago en línea (Opcional) - <a target="_blank" href="/static/files/cancelacion.pdf"
                    class="text-danger"> VER
                    EJEMPLO </a>
                </p>
                <div class="input-group">
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="cancelacion" aria-describedby="inputGroupFileAddon02">
                    <label class="custom-file-label" id="cancelacion1">Choose file</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="card mb-4 shadow-sm">
              <div class="card-body">
                <p>3. Planilla ISSS (Resañtar colaboradores a inscribir) <a target="_blank"
                    href="/static/files/planilla.pdf" class="text-danger"> VER EJEMPLO </a></p>
                <div class="input-group">
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="planilla" aria-describedby="inputGroupFileAddon02">
                    <label class="custom-file-label" id="planilla1">Choose file</label>
                  </div>
                </div>
              </div>
            </div>
            <button class="btn btn-primary float-left" onclick="ReiniciarInputs(); stepper1.previous()">
              Anterior
            </button>
            <button class="btn btn-primary float-right" onclick="VerificarArchivos(); stepper1.next()">
              Enviar y finalizar solicitud
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <%- include('../partials/footer.public.ejs'); %>
    <script src="https://cdn.jsdelivr.net/npm/bs-stepper/dist/js/bs-stepper.min.js"></script>
    <script>
      var stepper1Node = document.querySelector("#stepper1");
      var stepper1 = new Stepper(document.querySelector("#stepper1"));

    </script>